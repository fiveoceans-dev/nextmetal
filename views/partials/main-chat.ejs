<%# // partials/main-chat.ejs %>

    <!-- Left Column -->
    <div class="center-monocolumn">
        <%- include('dashboard.ejs') %>
            <div class="chat-container">
                <!-- Chat History Area -->
                <div class="chat-history" id="chatHistory">
                    <!-- Example messages -->
                    <div class="message received">Hello!</div>
                    <div class="message sent">Hi, how can I help you?</div>
                    <div class="message received">I'm looking for information on your services.</div>
                </div>
                <!-- Chat Bar at the Bottom -->
                <div class="chat-bar">
                    <textarea type="chat" id="chatInput" placeholder="What are you looking for?"></textarea>
                    <input type="submit" id="sendButton" value="  Send  ">
                </div>
            </div>

            <script>
                // Scroll chat history to the bottom on page load
                const chatHistory = document.getElementById('chatHistory');
                chatHistory.scrollTop = chatHistory.scrollHeight;

                // Handle sending messages
                document.getElementById('sendButton').addEventListener('click', function () {
                    const input = document.getElementById('chatInput');
                    const messageText = input.value.trim();
                    if (messageText !== "") {
                        // Create new message element
                        const newMessage = document.createElement('div');
                        newMessage.classList.add('message', 'sent');
                        newMessage.textContent = messageText;
                        // Append new message and clear input
                        chatHistory.appendChild(newMessage);
                        input.value = "";
                        // Auto-scroll to the bottom
                        chatHistory.scrollTop = chatHistory.scrollHeight;
                    }
                });

                // Optionally, you can add Enter key handling:
                document.getElementById('chatInput').addEventListener('keydown', function (event) {
                    if (event.key === 'Enter') {
                        event.preventDefault();
                        document.getElementById('sendButton').click();
                    }
                });
            </script>

    </div>